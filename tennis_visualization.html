<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  	<!-- Charset and load required libraries -->
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="http://dimplejs.org/dist/dimple.v2.3.0.min.js"></script>
    <script src="http://d3js.org/queue.v1.min.js"></script>
    <style>
      /* Title */
      h2 {
        text-align: center;
      }
      /* Normal text */
      div {
      	text-align: justify;
      }
      /* Warning about browsers */
      p {
      	text-align: center;
      	font-style: italic;
      }
    </style>

    <script type="text/javascript">
      "use strict"; // To force the declaration of all variables
      var margin = 50,
	      width = 700 - margin,
          height = 450 - margin
      function draw_figures(data1, data2) {
         draw_probability(data1);
         matches_line_plot(data2);
      };
      function draw_probability(data) {
          var svg = d3.select("body")
            .append("svg")
              .attr("width", width + margin)
              .attr("height", height + margin)
            .append('g')
                .attr('class','chart');

          var myChart = new dimple.chart(svg, data);

          // Add centered title
          svg.append("text")
		        .attr("x", myChart._xPixels() + myChart._widthPixels() / 2)
		        .attr("y", myChart._yPixels() - 20)
		        .style("text-anchor", "middle")
		        .style("font-family", "sans-serif")
		        .style("font-weight", "bold")
                .style("font-size", "14")
		        .text("With Higher rank higher propbability of winning the match.");

        // Create main x and y axis and assign titles and numeric format
         var x = myChart.addCategoryAxis("x", "Rank");
          x.title = "WTA or ATP Rank";
          //x.tickFormat = ',d'; //  Integer
          var y = myChart.addMeasureAxis("y", "M");
          y.title = "Probability of winning a match";
          //y.tickFormat = ',.2f'; // Two decimal places

        //  var z = myChart.addMeasureAxis("z", "W");

          myChart.addSeries("Rank", dimple.plot.line);
        //  myChart.addSeries("Women probability of Win", dimple.plot.line);
          //myChart.assignColor("Women probability of Win", "red");
          myChart.assignColor("Male probability of Win", "blue");

          myChart.addLegend(500, 50, 100, 100, "left");

          myChart.draw();
      };

      /* Plot number of matches for each sufrface type and sex*/
      function matches_line_plot(data) {
          var svg = d3.select("body")
            .append("svg")
              .attr("width", width + margin)
              .attr("height", height + margin)
            .append('g')
                .attr('class','chart');

          var myChart = new dimple.chart(svg, data);

          // Add centered title
          svg.append("text")
		        .attr("x", myChart._xPixels() + myChart._widthPixels() / 2)
		        .attr("y", myChart._yPixels() - 20)
		        .style("text-anchor", "middle")
		        .style("font-family", "sans-serif")
		        .style("font-weight", "bold")
            .style("font-size", "14")
		        .text("Number of matches by surface type and sex.");

          // Create main x and y axis and assign titles and numeric format.
    var x = myChart.addMeasureAxis("x", "Year");
          x.title = "Year";
          var y1 = myChart.addMeasureAxis("y", "Carpet");
          y1.title = "Number of matches by year with Surface of Carpet";
          var y2 = myChart.addMeasureAxis("y", "Clay");
          y2.title = "Number of matches by year with Surface of Clay";
          y2.tickFormat = ',.0f'; // Integer

          myChart.addLegend(500, 94, 100, 100, "left");

          myChart.draw();
      };

    </script>
<body>
      <h2>Tennis: Some interesting stats </h2>
      <div>Here we present a visual analysis about some parameters related to tennis matches. The first one is the probability of winning a match by rank and sex. The second one is the number of tennis matches by surface and sex along the years.
      </div>
       <p>Please use Chrome browser for a correct visualization</p>

 <script type="text/javascript">
   d3.queue()
   .defer(d3.csv, "probability_win_by_rank_sex.csv")
   .defer(d3.csv, "matches_by_surface_and_sex.csv")
   .await(function(error, data1, data2) {
       if (error) {
           console.error('Something went wrong: ' + error);
       }
       else {
           draw_figures(data1, data2);
       }
    });
   </script>


</div>
</body>
</html>